"use strict";(self.webpackChunkmodlib_docs=self.webpackChunkmodlib_docs||[]).push([[1987],{8096:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"apps/motion","title":"Motion","description":"Motion","source":"@site/_api_versioned_docs/version-1.1.0/apps/motion.md","sourceDirName":"apps","slug":"/apps/motion","permalink":"/en/application-module-library/docs/api-reference/apps/motion","draft":false,"unlisted":false,"tags":[],"version":"1.1.0","lastUpdatedAt":1750065085000,"sidebarPosition":6,"frontMatter":{"title":"Motion","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Matcher","permalink":"/en/application-module-library/docs/api-reference/apps/matcher"},"next":{"title":"Object Counter","permalink":"/en/application-module-library/docs/api-reference/apps/object_counter"}}');var i=s(4848),r=s(8453);const o={title:"Motion",sidebar_position:6},a=void 0,l={},c=[{value:"Motion",id:"motion",level:2},{value:"Attributes",id:"attributes",level:3},{value:"Methods",id:"methods",level:3},{value:'<span class="signature-title">__init__</span>',id:"__init__",level:4},{value:'<span class="signature-title">detect</span>',id:"detect",level:4},{value:'<span class="signature-title">capture_contours</span>',id:"capture_contours",level:4},{value:'<span class="signature-title">motion_bboxes</span>',id:"motion_bboxes",level:4},{value:'<span class="signature-title">non_max_suppression</span>',id:"non_max_suppression",level:4}];function d(e){const n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"module-separator","data-content":"Class"}),"\n",(0,i.jsx)(n.h2,{id:"motion",children:"Motion"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"Motion("}),"size_threshold:\xa0int\xa0=\xa0300, motion_threshold:\xa0int\xa0=\xa020",(0,i.jsx)("b",{children:")"})]}),"\nCalculates the change in pixel values from frame to frame and these changes\nrepresent motion. All motion is grouped to sort for real motion and calculates\nbboxes of the motion."]}),"\n",(0,i.jsx)(n.p,{children:"For example, declare motion like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"from modlib.apps import Motion\nmotion = Motion()\n\nwith device as stream:\n    for frame in stream:\n        motion_bboxes = motion.detect(frame, detections)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"attributes",children:"Attributes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("span",{className:"signature-title",children:"size_threshold: int"}),"\xa0\xa0\xa0\xa0"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("span",{className:"signature-title",children:"motion_threshold: int"}),"\xa0\xa0\xa0\xa0"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h4,{id:"__init__",children:(0,i.jsx)("span",{className:"signature-title",children:"__init__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__init__("}),"self, size_threshold:\xa0int\xa0=\xa0300, motion_threshold:\xa0int\xa0=\xa020",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(n.p,{children:"Initialize self.  See help(type(self)) for accurate signature."}),"\n",(0,i.jsx)(n.h4,{id:"detect",children:(0,i.jsx)("span",{className:"signature-title",children:"detect"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"detect("}),"self, frame:\xa0",(0,i.jsx)(n.a,{href:"../devices/frame#frame",children:"Frame"}),(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(n.p,{children:"detects motion from current frame and previous frame."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"frame"})," (",(0,i.jsx)(n.a,{href:"../devices/frame#frame",children:"Frame"}),"): the current frame"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Returns:"}),(0,i.jsx)(n.br,{}),"\n","returns bboxes of motion"]}),"\n",(0,i.jsx)(n.h4,{id:"capture_contours",children:(0,i.jsx)("span",{className:"signature-title",children:"capture_contours"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"capture_contours("}),"self, frame_diff:\xa0numpy.ndarray",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(n.p,{children:"Takes a grayscale image and uses image techniques to enhance egdes in the image and find the contours"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"frame_diff"})," (numpy.ndarray): subtracted frame of previous and current frames\n",(0,i.jsx)(n.strong,{children:"Returns:"}),(0,i.jsx)(n.br,{}),"\n","masks of contours of detected motion"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"motion_bboxes",children:(0,i.jsx)("span",{className:"signature-title",children:"motion_bboxes"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"motion_bboxes("}),"self, contours:\xa0Tuple, width:\xa0int, height:\xa0int",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(n.p,{children:"Calculates the bboxes from contour masks and filters out small changes."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"contours"})," (Tuple): contains the masks of motion detected"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"width"})," (int): width of"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"height"})," (int): height of Frame\n",(0,i.jsx)(n.strong,{children:"Returns:"}),(0,i.jsx)(n.br,{}),"\n","Detections of motion bboxes that can be used in other Modules"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"non_max_suppression",children:(0,i.jsx)("span",{className:"signature-title",children:"non_max_suppression"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"non_max_suppression("}),"self, bboxes:\xa0numpy.ndarray, scores:\xa0numpy.ndarray, threshold:\xa0float\xa0=\xa00.1",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsxs)(n.p,{children:["Post processing technique to combine overlapping motion detections",(0,i.jsx)(n.br,{}),"\n","into relevant detected motion."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"bboxes"})," (numpy.ndarray): array of bboxes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"scores"})," (numpy.ndarray): array of confidence score of the bboxes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"threshold"})," (float\xa0=\xa00.1): minimum threshold of the size of bboxes\n",(0,i.jsx)(n.strong,{children:"Returns:"}),(0,i.jsx)(n.br,{}),"\n","filtered array of bboxes"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(6540);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);