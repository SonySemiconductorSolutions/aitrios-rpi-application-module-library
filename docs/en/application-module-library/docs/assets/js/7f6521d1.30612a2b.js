"use strict";(self.webpackChunkmodlib_docs=self.webpackChunkmodlib_docs||[]).push([[8449],{239:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"devices/interpreters","title":"Interpreters","description":"This page combines the API reference for:","source":"@site/_api_versioned_docs/version-1.1.0/devices/interpreters.md","sourceDirName":"devices","slug":"/devices/interpreters","permalink":"/en/application-module-library/docs/api-reference/devices/interpreters","draft":false,"unlisted":false,"tags":[],"version":"1.1.0","lastUpdatedAt":1750065085000,"sidebarPosition":3,"frontMatter":{"title":"Interpreters","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Frame","permalink":"/en/application-module-library/docs/api-reference/devices/frame"},"next":{"title":"Playback","permalink":"/en/application-module-library/docs/api-reference/devices/playback"}}');var i=n(4848),l=n(8453);const t={title:"Interpreters",sidebar_position:3},d=void 0,a={},o=[{value:"KerasInterpreter",id:"kerasinterpreter",level:2},{value:"Methods",id:"methods",level:3},{value:'<span class="signature-title">__init__</span>',id:"__init__",level:4},{value:'<span class="signature-title">deploy</span>',id:"deploy",level:4},{value:'<span class="signature-title">__enter__</span>',id:"__enter__",level:4},{value:'<span class="signature-title">__exit__</span>',id:"__exit__",level:4},{value:'<span class="signature-title">__iter__</span>',id:"__iter__",level:4},{value:'<span class="signature-title">__next__</span>',id:"__next__",level:4},{value:'<span class="signature-title">load_tf_keras_model</span>',id:"load_tf_keras_model",level:4},{value:"ONNXInterpreter",id:"onnxinterpreter",level:2},{value:"Methods",id:"methods-1",level:3},{value:'<span class="signature-title">__init__</span>',id:"__init__-1",level:4},{value:'<span class="signature-title">deploy</span>',id:"deploy-1",level:4},{value:'<span class="signature-title">__enter__</span>',id:"__enter__-1",level:4},{value:'<span class="signature-title">__exit__</span>',id:"__exit__-1",level:4},{value:'<span class="signature-title">__iter__</span>',id:"__iter__-1",level:4},{value:'<span class="signature-title">__next__</span>',id:"__next__-1",level:4},{value:'<span class="signature-title">load_torch_onnx_model</span>',id:"load_torch_onnx_model",level:4}];function c(e){const s={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"This page combines the API reference for:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"modlib.devices.interpreters.keras_interpreter"}),"\n",(0,i.jsx)(s.li,{children:"modlib.devices.interpreters.onnx_interpreter"}),"\n"]}),"\n",(0,i.jsx)("div",{className:"module-separator","data-content":"Class"}),"\n",(0,i.jsx)(s.h2,{id:"kerasinterpreter",children:"KerasInterpreter"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"KerasInterpreter("}),"source:\xa0",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),", headless:\xa0Optional[bool]\xa0=\xa0False, timeout:\xa0Optional[int]\xa0=\xa0None",(0,i.jsx)("b",{children:")"})]}),"\nKeras Interpreter device."]}),"\n",(0,i.jsx)(s.p,{children:"This device module allows to run inference of Keras models locally and is designed for test/development purposes.\nOutput tensors are post-processed by the model post-processor function and attached to the frame."}),"\n",(0,i.jsx)(s.p,{children:"Example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"from modlib.devices import KerasInterpreter\n\ndevice = KerasInterpreter()\nmodel = CustomKerasModel(...)\ndevice.deploy(model)\n\nwith device as stream:\n    for frame in stream:\n        print(frame.detections)\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Inherites"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"../devices/device#device",children:"Device"})}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(s.h4,{id:"__init__",children:(0,i.jsx)("span",{className:"signature-title",children:"__init__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__init__("}),"self, source:\xa0",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),", headless:\xa0Optional[bool]\xa0=\xa0False, timeout:\xa0Optional[int]\xa0=\xa0None",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Initialize a Keras Interpreter device."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"source"})," (",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),"): The source of the Keras model."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"headless"})," (Optional[bool]\xa0=\xa0False): Whether to run the interpreter in headless mode. Defaults to False."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"timeout"})," (Optional[int]\xa0=\xa0None): The timeout value for the interpreter. Defaults to None."]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"deploy",children:(0,i.jsx)("span",{className:"signature-title",children:"deploy"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"deploy("}),"self, model:\xa0",(0,i.jsx)(s.a,{href:"../models/model#model",children:"Model"}),(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Deploys a Keras model for local inference."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"model"})," (",(0,i.jsx)(s.a,{href:"../models/model#model",children:"Model"}),"): The Keras model to deploy."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Raises:"}),(0,i.jsx)(s.br,{}),"\n","FileNotFoundError: If the model file is not found.",(0,i.jsx)(s.br,{}),"\n","TypeError: If the model or model_file is not a Keras model.",(0,i.jsx)(s.br,{}),"\n","AttributeError: If the model does not have a pre_process method."]}),"\n",(0,i.jsx)(s.h4,{id:"__enter__",children:(0,i.jsx)("span",{className:"signature-title",children:"__enter__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__enter__("}),"self",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Start the KerasInterpreter device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__exit__",children:(0,i.jsx)("span",{className:"signature-title",children:"__exit__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__exit__("}),"self, exc_type, exc_val, exc_tb",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Stop the KerasInterpreter device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__iter__",children:(0,i.jsx)("span",{className:"signature-title",children:"__iter__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__iter__("}),"self",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Iterate over the frames in the device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__next__",children:(0,i.jsx)("span",{className:"signature-title",children:"__next__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__next__("}),"self",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Get the next frame in the device stream."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Returns:"}),(0,i.jsx)(s.br,{}),"\n","The next frame in the device stream."]}),"\n",(0,i.jsx)(s.h4,{id:"load_tf_keras_model",children:(0,i.jsx)("span",{className:"signature-title",children:"load_tf_keras_model"})}),"\n",(0,i.jsx)("div",{className:"decorator",children:"@staticmethod"}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"load_tf_keras_model("}),"model_path:\xa0str",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsxs)(s.p,{children:["Loads the keras model file as a ",(0,i.jsx)(s.code,{children:"tf.keras.model"}),".",(0,i.jsx)(s.br,{}),"\n","Requires tensorflow 2.14 to be installed."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Raises:"}),(0,i.jsx)(s.br,{}),"\n","ImportError: When loading the model fails due to missing tensorflow dependency."]}),"\n",(0,i.jsx)("div",{className:"module-separator","data-content":"Class"}),"\n",(0,i.jsx)(s.h2,{id:"onnxinterpreter",children:"ONNXInterpreter"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"ONNXInterpreter("}),"source:\xa0",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),", headless:\xa0Optional[bool]\xa0=\xa0False, timeout:\xa0Optional[int]\xa0=\xa0None",(0,i.jsx)("b",{children:")"})]}),"\nONNX Interpreter device."]}),"\n",(0,i.jsx)(s.p,{children:"This device module allows to run inference of ONNX models locally and is designed for test/development purposes.\nInput and output tensors are processed by the model pre- and post-processor functions and attached to the frame."}),"\n",(0,i.jsx)(s.p,{children:"Example:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"from modlib.devices import ONNXInterpreter\n\ndevice = ONNXInterpreter()\nmodel = ONNXModel(...)\ndevice.deploy(model)\n\nwith device as stream:\n    for frame in stream:\n        print(frame.detections)\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Inherites"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"../devices/device#device",children:"Device"})}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"methods-1",children:"Methods"}),"\n",(0,i.jsx)(s.h4,{id:"__init__-1",children:(0,i.jsx)("span",{className:"signature-title",children:"__init__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__init__("}),"self, source:\xa0",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),", headless:\xa0Optional[bool]\xa0=\xa0False, timeout:\xa0Optional[int]\xa0=\xa0None",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Initialize a ONNX Interpreter device."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"source"})," (",(0,i.jsx)(s.a,{href:"../devices/sources#source",children:"Source"}),"): The source of the ONNX model."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"headless"})," (Optional[bool]\xa0=\xa0False): Whether to run the interpreter in headless mode. Defaults to False."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"timeout"})," (Optional[int]\xa0=\xa0None): The timeout value for the interpreter. Defaults to None."]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"deploy-1",children:(0,i.jsx)("span",{className:"signature-title",children:"deploy"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"deploy("}),"self, model:\xa0",(0,i.jsx)(s.a,{href:"../models/model#model",children:"Model"}),(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Deploys a ONNX model for local inference."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Args:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"model"})," (",(0,i.jsx)(s.a,{href:"../models/model#model",children:"Model"}),"): The ONNX model to deploy."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Raises:"}),(0,i.jsx)(s.br,{}),"\n","FileNotFoundError: If the model file is not found.",(0,i.jsx)(s.br,{}),"\n","TypeError: If the model or model_file is not a ONNX model.",(0,i.jsx)(s.br,{}),"\n","AttributeError: If the model does not have a pre_process method."]}),"\n",(0,i.jsx)(s.h4,{id:"__enter__-1",children:(0,i.jsx)("span",{className:"signature-title",children:"__enter__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__enter__("}),"self",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Start the ONNXInterpreter device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__exit__-1",children:(0,i.jsx)("span",{className:"signature-title",children:"__exit__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__exit__("}),"self, exc_type, exc_val, exc_tb",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Stop the ONNXInterpreter device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__iter__-1",children:(0,i.jsx)("span",{className:"signature-title",children:"__iter__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__iter__("}),"self",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsx)(s.p,{children:"Iterate over the frames in the device stream."}),"\n",(0,i.jsx)(s.h4,{id:"__next__-1",children:(0,i.jsx)("span",{className:"signature-title",children:"__next__"})}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"__next__("}),"self",(0,i.jsx)("b",{children:")"})," \u2011> ",(0,i.jsx)(s.a,{href:"../devices/frame#frame",children:"Frame"})]}),"\n",(0,i.jsx)(s.p,{children:"Get the next frame in the device stream."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Returns:"})," (",(0,i.jsx)(s.a,{href:"../devices/frame#frame",children:"Frame"}),")",(0,i.jsx)(s.br,{}),"\n","The next frame in the device stream."]}),"\n",(0,i.jsx)(s.h4,{id:"load_torch_onnx_model",children:(0,i.jsx)("span",{className:"signature-title",children:"load_torch_onnx_model"})}),"\n",(0,i.jsx)("div",{className:"decorator",children:"@staticmethod"}),"\n",(0,i.jsxs)("div",{className:"signature",children:[(0,i.jsx)("b",{children:"load_torch_onnx_model("}),"model_path:\xa0str",(0,i.jsx)("b",{children:")"})]}),"\n",(0,i.jsxs)(s.p,{children:["Loads the onnx model file.",(0,i.jsx)(s.br,{}),"\n","Requires onnx runtime and some other external modules to be installed."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Raises:"}),(0,i.jsx)(s.br,{}),"\n","ImportError: When loading the model fails due to missing dependency."]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>d});var r=n(6540);const i={},l=r.createContext(i);function t(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);